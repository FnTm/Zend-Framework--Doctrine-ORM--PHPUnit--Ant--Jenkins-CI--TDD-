<project name="Zend Framework Best Practice" default="build">
    <target name="clean">
        <delete dir="${basedir}/build"/>
    </target>

    <target name="prepare">
        <mkdir dir="${basedir}/build"/>
        <mkdir dir="${basedir}/build/logs"/>
        <mkdir dir="${basedir}/build/docs"/>
    </target>

    <target name="phpunit">
        <exec dir="${basedir}" executable="phpunit" failonerror="false">
            <arg line="--configuration phpunit.xml
              --log-junit ${basedir}/build/logs/phpunit.xml
              --coverage-html ${basedir}/build/coverage
              --process-isolation" />
        </exec>
    </target>

    <target name="phpcpd">
        <exec dir="${basedir}" executable="phpcpd" failonerror="false">
            <arg line="--log-pmd ${basedir}/build/logs/phpcpd.xml
            ${basedir}/../application" />
        </exec>
    </target>

    <target name="phploc">
        <exec dir="${basedir}" executable="phploc" failonerror="false">
            <arg line="--log-xml ${basedir}/build/logs/phploc.xml
            ${basedir}/../application" />
        </exec>
    </target>

    <target name="phpdcd">
        <exec dir="${basedir}" executable="phpdcd" failonerror="false" output="${basedir}/build/logs/phpdcd.xml">
            <arg line="${basedir}/../application" />
        </exec>
    </target>

    <target name="phpdoc">
        <exec dir="${basedir}/../../library/phpDocumentor" executable="./phpdoc" failonerror="false">
            <arg line="-t ${basedir}/build/docs
              -o PDF:default:default
              -d ${basedir}/../../application"/>
        </exec>
    </target>

    <target name="phpdoc2">
        <exec dir="${basedir}/../../library/phpDocumentor" executable="./phpdoc" failonerror="false">
            <arg line="-t ${basedir}/build/docs/earthli
              -o HTML:frames:earthli
              -d ${basedir}/../../app"/>
        </exec>
    </target>

    <target name="phpdoc3">
        <exec dir="${basedir}/../../library/phpDocumentor" executable="./phpdoc" failonerror="false">
            <arg line="-t ${basedir}/build/docs/lol33t
              -o HTML:frames:l0l33t
              -d ${basedir}/../../app"/>
        </exec>
    </target>

    <target name="phpdoc4">
        <exec dir="${basedir}/../../library/phpDocumentor" executable="./phpdoc" failonerror="false">
            <arg line="-t ${basedir}/build/docs/smarty
              -o HTML:Smarty:PHP
              -d ${basedir}/../../app"/>
        </exec>
    </target>

    <target name="build" depends="clean,prepare,phpunit,phpcpd,phploc,phpdcd"/>

</project>
